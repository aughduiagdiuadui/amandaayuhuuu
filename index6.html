<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0" />
    <title>Sebuah Bisikan Untukmu</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;1,600&family=Poppins:wght@300&display=swap" rel="stylesheet" />
    <style>
      :root {
        --bg-start: #1b1a2e;
        --bg-end: #0a0814;
        --glow: #e0cfff;
        --text: #f0e8ff;
      }
      /* --- 1. GENERAL SETUP & TYPOGRAPHY --- */
      * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
      html, body {
        height: 100vh;
        width: 100vw;
        overflow: hidden;
        background: linear-gradient(to top, var(--bg-end) 0%, var(--bg-start) 100%);
        font-family: 'Poppins', sans-serif;
        color: var(--text);
      }
      .hidden { opacity: 0 !important; pointer-events: none !important; }
      .prompt {
        position: fixed;
        bottom: 12%;
        left: 50%;
        transform: translateX(-50%);
        width: 85%;
        max-width: 500px;
        text-align: center;
        font-family: 'Cormorant Garamond', serif;
        font-size: 1.5rem;
        font-style: italic;
        text-shadow: 0 0 10px var(--glow);
        opacity: 0;
        transition: opacity 2s ease-in-out;
        z-index: 200;
        line-height: 1.6;
      }
      .prompt.show { opacity: 1; }

      /* --- 2. SCENE & BACKGROUND ELEMENTS --- */
      #scene {
        position: fixed;
        width: 100%;
        height: 100%;
        z-index: 1;
      }
      #stars-canvas {
        position: absolute;
        top: 0; left: 0;
        width: 100%; height: 100%;
      }
      #mist-canvas {
        position: absolute;
        bottom: 0; left: 0;
        width: 100%; height: 50%;
        opacity: 1;
        transition: opacity 4s ease-out;
      }
      #moon {
        position: absolute;
        top: 10%; right: 10%;
        width: 80px; height: 80px;
        border-radius: 50%;
        background-color: #f0e8ff;
        box-shadow: 0 0 20px 5px #f0e8ff, 0 0 40px 10px rgba(224, 207, 255, 0.5);
        cursor: pointer;
        transition: all 1s ease-in-out;
        z-index: 10;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
      }
      #moon.interactive {
        transform: scale(1.2);
        box-shadow: 0 0 30px 15px #f0e8ff, 0 0 60px 25px rgba(224, 207, 255, 0.7);
      }
      #moon-photo {
        width: 100%; height: 100%;
        object-fit: cover;
        opacity: 0;
        transition: opacity 2s ease-in-out;
      }
      #moon-photo.show { opacity: 1; }
      
      /* --- 3. FLOWER & TEXT INTERACTION --- */
      .flower-bud {
        position: absolute;
        width: 40px; height: 60px;
        z-index: 100;
        cursor: pointer;
        transition: transform 0.5s, opacity 0.5s;
        will-change: transform;
      }
      .flower-bud svg {
        width: 100%; height: 100%;
        filter: drop-shadow(0 0 8px var(--glow));
        overflow: visible;
      }
      .petal {
        transition: transform 2s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        transform-origin: bottom center;
        fill: url(#petalGradient);
      }
      .flower-bud.bloomed .petal-1 { transform: rotate(-45deg) scale(1.1); }
      .flower-bud.bloomed .petal-2 { transform: rotate(45deg) scale(1.1); }
      .flower-bud.bloomed .petal-3 { transform: scale(1.05); }

      .whisper-text {
        position: absolute;
        font-family: 'Cormorant Garamond', serif;
        font-style: italic;
        font-size: 1.1rem;
        width: 200px;
        line-height: 1.5;
        text-shadow: 0 0 5px var(--glow);
        opacity: 0;
        transform: translateY(10px);
        transition: opacity 1s, transform 1s;
        pointer-events: none;
      }
      .flower-bud.bloomed .whisper-text {
        opacity: 1;
        transform: translateY(0);
      }
      
    </style>
</head>
<body>
    <div id="scene">
        <canvas id="stars-canvas"></canvas>
        <canvas id="mist-canvas"></canvas>
        <div id="moon">
            <img id="moon-photo" src="https://i.postimg.cc/tJq1Ptb9/1.jpg" alt="Kenangan"/>
        </div>
        <div id="flower-field"></div>
    </div>
    <p class="prompt" id="prompt"></p>

    <svg width="0" height="0" style="position:absolute;">
        <defs>
            <radialGradient id="petalGradient" cx="50%" cy="100%" r="100%" fx="50%" fy="100%">
                <stop offset="0%" style="stop-color:#d1b3ff;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#a385c9;stop-opacity:1" />
            </radialGradient>
        </defs>
    </svg>

    <script>
    // --- 1. SETUP & GLOBAL STATE ---
    const promptEl = document.getElementById('prompt');
    const flowerField = document.getElementById('flower-field');
    const moon = document.getElementById('moon');
    const moonPhoto = document.getElementById('moon-photo');
    let flowersBloomed = 0;
    const TOTAL_FLOWERS_TO_BLOOM = 7;
    let interactionAllowed = true;

    // --- Romantic lines array ---
    const whispers = [
        "Aku tidak pernah tahu bahwa sebuah 'halo' yang sederhana, bisa menjadi awal dari bab terindah dalam ceritaku.",
        "Ada jutaan percakapan di dunia, tapi entah kenapa, percakapan denganmu terasa seperti pulang ke rumah.",
        "Caramu tersenyum... seperti sebuah pagi yang datang setelah malam tergelap, membawa harapan baru.",
        "Dalam duniamu yang sibuk, terima kasih telah memberiku jeda... sebuah ruang tenang untuk sekadar bernapas.",
        "Aku menyukai caramu melihat dunia, seolah setiap hal kecil memiliki keajaiban yang tersembunyi.",
        "Gema tawamu adalah melodi yang tanpa sadar selalu kunantikan untuk mengisi hening hariku.",
        "Mengenalmu bukan seperti menemukan kepingan yang hilang, tapi menemukan sebuah semesta baru yang tidak pernah kubayangkan ada.",
        "Beberapa orang datang membawa pelajaran, kau datang membawa ketenangan.",
        "Terima kasih telah menunjukkan bahwa menjadi diri sendiri adalah hal terindah yang bisa kau bagikan.",
        "Setiap cerita yang kau bagikan adalah sebuah jendela ke duniamu, dan aku bersyukur diizinkan untuk mengintipnya."
    ];
    let whispersToShow = [...whispers].sort(() => 0.5 - Math.random()); // Shuffle whispers

    // --- 2. DISPLAY & PROMPT LOGIC ---
    function showPrompt(text) {
        promptEl.textContent = text;
        promptEl.classList.add('show');
    }
    function hidePrompt() {
        promptEl.classList.remove('show');
    }

    // --- 3. BACKGROUND & ATMOSPHERE ---
    const starsCanvas = document.getElementById('stars-canvas');
    const starsCtx = starsCanvas.getContext('2d');
    starsCanvas.width = window.innerWidth;
    starsCanvas.height = window.innerHeight;
    let stars = [];

    function initStars() {
        for (let i = 0; i < 150; i++) {
            stars.push({
                x: Math.random() * starsCanvas.width,
                y: Math.random() * starsCanvas.height,
                size: Math.random() * 1.5,
                opacity: Math.random()
            });
        }
    }
    function drawStars() {
        starsCtx.clearRect(0, 0, starsCanvas.width, starsCanvas.height);
        stars.forEach(star => {
            star.opacity += (Math.random() - 0.5) * 0.05;
            if (star.opacity < 0) star.opacity = 0;
            if (star.opacity > 1) star.opacity = 1;
            starsCtx.fillStyle = `rgba(224, 207, 255, ${star.opacity})`;
            starsCtx.beginPath();
            starsCtx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
            starsCtx.fill();
        });
        requestAnimationFrame(drawStars);
    }
    const mistCanvas = document.getElementById('mist-canvas');
    const mistCtx = mistCanvas.getContext('2d');
    mistCanvas.width = window.innerWidth;
    mistCanvas.height = window.innerHeight * 0.5;

    function drawMist() {
        const gradient = mistCtx.createLinearGradient(0, 0, 0, mistCanvas.height);
        gradient.addColorStop(0, 'rgba(27, 26, 46, 0)');
        gradient.addColorStop(1, 'rgba(27, 26, 46, 0.9)');
        mistCtx.fillStyle = gradient;
        mistCtx.fillRect(0, 0, mistCanvas.width, mistCanvas.height);
    }
    
    // --- 4. FLOWER CREATION & INTERACTION ---
    function createFlower(options) {
        const bud = document.createElement('div');
        bud.className = 'flower-bud';
        bud.style.left = `${options.x}vw`;
        bud.style.top = `${options.y}vh`;
        bud.style.transform = `scale(${options.scale || 1})`;
        bud.innerHTML = `
            <svg viewBox="0 0 100 120">
                <path class="petal petal-1" d="M50 120 C 10 90, 10 30, 50 0" />
                <path class="petal petal-2" d="M50 120 C 90 90, 90 30, 50 0" />
                <path class="petal petal-3" d="M50 120 C 30 80, 70 80, 50 0" />
            </svg>
            <div class="whisper-text" style="left: ${options.textPos.x}px; top: ${options.textPos.y}px;"></div>
        `;
        flowerField.appendChild(bud);

        const whisperTextEl = bud.querySelector('.whisper-text');
        
        bud.addEventListener('click', () => {
            if (bud.classList.contains('bloomed') || !interactionAllowed) return;
            if (whispersToShow.length === 0) return;

            bud.classList.add('bloomed');
            whisperTextEl.textContent = whispersToShow.pop();
            flowersBloomed++;
            
            // Brighten moon slightly
            moon.style.opacity = 0.8 + (flowersBloomed / TOTAL_FLOWERS_TO_BLOOM) * 0.2;

            if (flowersBloomed >= TOTAL_FLOWERS_TO_BLOOM) {
                interactionAllowed = false;
                hidePrompt();
                setTimeout(() => {
                    showPrompt("Semua bisikan itu kini telah sampai ke bulan. Lihatlah apa yang terpantul di sana...");
                    moon.classList.add('interactive');
                }, 2000);
            }
        }, { once: true });
    }

    function initMeadow() {
        // First flower, centered
        createFlower({ x: 50, y: 50, scale: 1.2, textPos: { x: 50, y: 0 } });

        // Wait for first flower to be clicked before revealing the rest
        const firstFlower = document.querySelector('.flower-bud');
        firstFlower.addEventListener('click', () => {
            document.getElementById('mist-canvas').style.opacity = '0';
            hidePrompt();
            setTimeout(() => {
                showPrompt("Dengarkan bisikan mereka yang lain.");
                // Create other flowers
                const positions = [
                    { x: 20, y: 60, scale: 0.9, textPos: { x: 50, y: 10 } },
                    { x: 80, y: 55, scale: 1.1, textPos: { x: -210, y: 20 } },
                    { x: 30, y: 80, scale: 1.0, textPos: { x: 50, y: -30 } },
                    { x: 70, y: 85, scale: 0.8, textPos: { x: -210, y: -20 } },
                    { x: 15, y: 40, scale: 1.0, textPos: { x: 50, y: 20 } },
                    { x: 85, y: 35, scale: 0.9, textPos: { x: -210, y: 10 } },
                ];
                positions.forEach((pos, i) => {
                    setTimeout(() => createFlower(pos), i * 150);
                });
            }, 1000);
        }, { once: true });
    }
    
    // --- 5. MOON & FINALE ---
    moon.addEventListener('click', () => {
        if (!moon.classList.contains('interactive')) return;
        moonPhoto.classList.add('show');
        hidePrompt();
        setTimeout(() => {
            // Final, longer message
            showPrompt("Dari semua bisikan ini, lahirlah sebuah pemahaman... bahwa keindahan terbesar bukanlah bintang di langit, tapi hadirnya dirimu di bumi ini. Happy Girlfriend Day, Amanda.");
        }, 2000);
    });

    // --- 6. INITIALIZATION ---
    window.onload = () => {
        initStars();
        drawStars();
        drawMist();
        initMeadow();
        showPrompt("Di padang ini, setiap bunga menyimpan sebuah bisikan... yang menantimu.");
    };

    </script>
</body>
</html>